import streamlit as st
import pandas as pd
import plotly.express as px

# --- –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø –°–¢–û–†–Ü–ù–ö–ò ---
st.set_page_config(
    page_title="Digital Health Dashboard",
    page_icon="üìä",
    layout="wide", # –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –≤—Å—é —à–∏—Ä–∏–Ω—É –µ–∫—Ä–∞–Ω–∞
    initial_sidebar_state="expanded"
)

# --- –§–£–ù–ö–¶–Ü–Ø –ó–ê–í–ê–ù–¢–ê–ñ–ï–ù–ù–Ø –î–ê–ù–ò–• ---
# st.cache_data –¥–æ–∑–≤–æ–ª—è—î –Ω–µ –ø–µ—Ä–µ–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ —Ñ–∞–π–ª —â–æ—Ä–∞–∑—É, –∫–æ–ª–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–∫–∞—î –∫–Ω–æ–ø–∫—É
@st.cache_data
def load_data():
    # –®–ª—è—Ö –¥–æ –Ω–∞—à–æ–≥–æ "–∑–æ–ª–æ—Ç–æ–≥–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É"
    df = pd.read_csv('data/processed/cleaned_data.csv')
    return df

df = load_data()

# --- –ë–û–ö–û–í–ê –ü–ê–ù–ï–õ–¨ (SIDEBAR) ---
st.sidebar.title("üõ† –ù–∞–≤—ñ–≥–∞—Ü—ñ—è")
page = st.sidebar.radio(
    "–û–±–µ—Ä—ñ—Ç—å —Ä–æ–∑–¥—ñ–ª –ø—Ä–æ—î–∫—Ç—É:",
    ["–ì–æ–ª–æ–≤–Ω–∞", "–ê–Ω–∞–ª—ñ–∑ –≥—ñ–ø–æ—Ç–µ–∑", "–ì–ª–æ–±–∞–ª—å–Ω–∞ –≥–µ–æ–≥—Ä–∞—Ñ—ñ—è", "ML –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞"]
)

st.sidebar.markdown("---")
st.sidebar.info("–ü—Ä–æ—î–∫—Ç –ø—ñ–¥–≥–æ—Ç—É–≤–∞–≤: [Vitalii Chernetskyi]")

# --- –õ–û–ì–Ü–ö–ê –ü–ï–†–ï–ú–ò–ö–ê–ù–ù–Ø –°–¢–û–†–Ü–ù–û–ö ---

if page == "–ì–æ–ª–æ–≤–Ω–∞":
    st.title("üìä –ê–Ω–∞–ª—ñ–∑ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ –≤—ñ–¥ —Å–æ—Ü—ñ–∞–ª—å–Ω–∏—Ö –º–µ—Ä–µ–∂")
    st.write("""
    –í—ñ—Ç–∞—î–º–æ —É –¥–æ—Å–ª—ñ–¥–Ω–∏—Ü—å–∫–æ–º—É –ø—Ä–æ—î–∫—Ç—ñ, –ø—Ä–∏—Å–≤—è—á–µ–Ω–æ–º—É –∞–Ω–∞–ª—ñ–∑—É —Ü–∏—Ñ—Ä–æ–≤–∏—Ö –∑–≤–∏—á–æ–∫ –º–æ–ª–æ–¥—ñ. 
    –ú–∏ –¥–æ—Å–ª—ñ–¥–∏–ª–∏ –¥–∞–Ω—ñ 700+ —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ –∑ —É—Å—å–æ–≥–æ —Å–≤—ñ—Ç—É, —â–æ–± –∑—Ä–æ–∑—É–º—ñ—Ç–∏, —è–∫ –µ–∫—Ä–∞–Ω–Ω–∏–π —á–∞—Å 
    –≤–ø–ª–∏–≤–∞—î –Ω–∞ –Ω–∞—à–µ —Ä–µ–∞–ª—å–Ω–µ –∂–∏—Ç—Ç—è.
    """)
    
    # –°—Ç–≤–æ—Ä—é—î–º–æ –∫–æ–ª–æ–Ω–∫–∏ –¥–ª—è KPI
    st.subheader("–ö–ª—é—á–æ–≤—ñ –ø–æ–∫–∞–∑–Ω–∏–∫–∏ (Global Metrics)")
    col1, col2, col3, col4 = st.columns(4)
    
    with col1:
        st.metric("–†–µ—Å–ø–æ–Ω–¥–µ–Ω—Ç—ñ–≤", len(df))
    with col2:
        st.metric("–°–µ—Ä–µ–¥–Ω—ñ–π —á–∞—Å", f"{df['Avg_Daily_Usage_Hours'].mean():.1f} –≥–æ–¥")
    with col3:
        st.metric("–†—ñ–≤–µ–Ω—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ", f"{df['Addicted_Score'].mean():.1f}/10")
    with col4:
        st.metric("–†–µ–≥—ñ–æ–Ω—ñ–≤", df['Region'].nunique())

    st.write("---")
    st.subheader("–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥ –¥–∞–Ω–∏—Ö")
    st.dataframe(df.head(10), use_container_width=True)

elif page == "–ê–Ω–∞–ª—ñ–∑ –≥—ñ–ø–æ—Ç–µ–∑":
    st.title("üß™ –ì–ª–∏–±–æ–∫–∏–π –∞–Ω–∞–ª—ñ–∑ –≥—ñ–ø–æ—Ç–µ–∑")
    st.info("–¢—É—Ç –º–∏ –±—É–¥–µ–º–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ –Ω–∞—à—ñ 7 –≥—ñ–ø–æ—Ç–µ–∑ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏—Ö –≥—Ä–∞—Ñ—ñ–∫—ñ–≤.")
    # –¢—É—Ç –ø—ñ–∑–Ω—ñ—à–µ –¥–æ–¥–∞–º–æ Tabs

elif page == "–ì–ª–æ–±–∞–ª—å–Ω–∞ –≥–µ–æ–≥—Ä–∞—Ñ—ñ—è":
    st.title("üåç –ì–µ–æ–≥—Ä–∞—Ñ—ñ—á–Ω–∏–π —Ä–æ–∑–ø–æ–¥—ñ–ª")
    st.info("–†–æ–∑–¥—ñ–ª –∑ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—é –∫–∞—Ä—Ç–æ—é —Å–≤—ñ—Ç—É —Ç–∞ —Ä–µ–≥—ñ–æ–Ω–∞–ª—å–Ω–∏–º–∏ —ñ–Ω—Å–∞–π—Ç–∞–º–∏.")

elif page == "ML –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞":
    st.title("ü§ñ –ú–∞—à–∏–Ω–Ω–µ –Ω–∞–≤—á–∞–Ω–Ω—è: –ü–µ—Ä–µ–≤—ñ—Ä —Å–µ–±–µ")
    st.info("–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π –±–ª–æ–∫ –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –≤–∞—à–æ–≥–æ —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ –ø—Ä–æ—Ñ—ñ–ª—é.")
